<!doctype html>
<html>
  <head>
    <title>Dynamic (Tiled) Example</title>
    <link rel="stylesheet" href="css/test_app.css" />
    <link rel="stylesheet" href="css/leaflet.css" />
  </head>
  <body>
    <div id="container">
      <div id="main">
        <div id="map"></div>
      </div>
    </div>
    <script src="../lib/leaflet.js"></script>
    <script src="../src/AGS.js"></script>
    <script src="../src/AGS.Security.js"></script>
    <script src="../src/AGS.Layer.js"></script>
    <script src="../src/AGS.Layer.Tiled.js"></script>
    <script src="../src/AGS.Layer.Tiled.Dynamic.js"></script>
    <script type="text/javascript">
      window.onload = function() {
        window.map = new L.Map('map');

        var lr = new L.LatLng(42.326515, -122.875595);
        map.setView(lr, 13);

        var baseUrl = 'http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer';
        var baseLayer = new L.AGS.Layer.Tiled(baseUrl);
        map.addLayer(baseLayer);

        function showDyn() {
          //var dynUrl = 'http://data.sanborn.com/ArcGIS/rest/services/LittleRock/EnvironmentalPermits/MapServer';
          var dynUrl = 'http://192.168.0.14:8080/services/medford:buildings';
          var dynLayer = new L.AGS.Layer.Tiled.Dynamic(dynUrl);
          map.addLayer(dynLayer);
        }

        showDyn();
      }
    </script>
  </body>
</html>